"use strict";!function(){function i(e,t,a){var r=document.createElement(e);if(void 0!==a&&(r.innerText=a),t)for(var[n,o]of Object.entries(t))r.setAttribute(n,o);return r}document.documentElement.dataset.js=!0;var e=window,t={displayPage:(e,t)=>{if(!Object.hasOwn(window.PAGES,e))throw new Error("Unknown page "+e);console.log("%cLoading "+e,"text-decoration:underline"),window.history.replaceState(null,"",e),document.body.setAttribute("data-page",e);var a=Object.keys(window.PAGES),r=a.indexOf(e);for(let i=0;i<a.length;i++){var n=i<=r?"remove":"add";document.querySelector(`[data-page="${a[i]}"]`).classList[n]("right")}window.PAGES[e]instanceof Function&&window.PAGES[e].call(this,t);var o=e.split("/"),o=o[o.length-1].trim();document.title="Douile"+(0<o.length?" | "+o:"")},displayImages:e=>{console.log(e);var t=document.querySelector(".gallery");t.setAttribute("data-selected",0),e.length<2&&t.setAttribute("data-single","true");for(let r=0;r<e.length;r++){var a=i("div",{class:"gallery-image-container"});a.appendChild(i("img",{class:"gallery-image",src:e[r],"data-index":r})),t.appendChild(a),null===document.head.querySelector(`link[rel="preload"][as="image"][href="${e[r]}"]`)&&document.head.appendChild(i("link",{rel:"preload",as:"image",href:e[r]}))}window.selectImage(0)},closeImages:()=>{var e=document.querySelector(".gallery");e.removeAttribute("data-selected"),e.removeAttribute("data-single");for(const t of e.querySelectorAll(".gallery-image-container"))t.remove()},selectImage:r=>{var n=document.querySelector(".gallery");if(n.hasAttribute("data-selected")){let t=parseInt(n.getAttribute("data-selected"),10),a=(t=Number.isNaN(t)?0:t)+r;for(var o=Array.from(n.querySelectorAll("img.gallery-image"));a>=o.length;)a-=o.length;for(;a<0;)a+=o.length;if(n.setAttribute("data-selected",a),t!==a)for(let e=0;e<o.length;e++){const i=o[e];i.removeAttribute("data-active"),e===t?(i.setAttribute("class","gallery-image"),window.requestAnimationFrame(()=>{i.classList.add(0<r?"slide-out-left":"slide-out-right")})):e===a&&(i.setAttribute("data-active","true"),i.setAttribute("class","gallery-image"),window.requestAnimationFrame(()=>{i.classList.add(0<r?"slide-in-right":"slide-in-left")}))}else o[a].setAttribute("data-active","true")}},toggleLightMode:()=>{var e="light"===document.documentElement.getAttribute("data-style"),e=(document.documentElement.setAttribute("data-style",e?"dark":"light"),document.querySelector("canvas#dynamic-background"));e.dataColor=getComputedStyle(e).getPropertyValue("--foreground")},projectFilterAdd:e=>{var t=document.querySelector(".projects");let a=[];(a=t.hasAttribute("data-filter")?t.getAttribute("data-filter").split(" "):a).push(e),projectFilterUpdate(a)},projectFilterRemove:t=>{var e=document.querySelector(".projects");let a=[];a=(a=e.hasAttribute("data-filter")?e.getAttribute("data-filter").split(" "):a).filter(e=>e!==t),projectFilterUpdate(a)},projectFilterToggle:t=>{var e=document.querySelector(".projects");let a=[];(a=e.hasAttribute("data-filter")?e.getAttribute("data-filter").split(" "):a).includes(t)?a=a.filter(e=>e!==t):a.push(t),projectFilterUpdate(a)},projectFilterUpdate:e=>{var t=document.querySelector(".projects");if(0<e.length){document.documentElement.dataset.animateProjects=!0,t.setAttribute("data-filter",e.join(" "));for(const r of document.querySelectorAll(".project"))r.classList.remove("project-shown");for(const n of document.querySelectorAll(e.map(e=>".project__"+e).join("")))n.classList.add("project-shown")}else{t.hasAttribute("data-filter")&&(document.documentElement.dataset.animateProjects=!0),t.removeAttribute("data-filter");for(const o of document.querySelectorAll(".project"))o.classList.add("project-shown")}let a=document.querySelector("link[data-role=category-filter]");null===a&&(a=i("link",{rel:"stylesheet","data-role":"category-filter"}),document.head.appendChild(a)),URL.revokeObjectURL(a.href);t=new Blob(e.map(e=>`.project-tag__${e}{border:1px solid var(--color)}`),{type:"text/css"});a.href=URL.createObjectURL(t)},loadActivityPage:async()=>{console.log("%cLoad Activity Page","color:#f00");var e,t,a=document.querySelector(".page-activity");a.hasAttribute("data-api-loading")||(a.setAttribute("data-api-loading","true"),e=parseInt(a.getAttribute("data-api-page"),10)||1,422!==(t=await fetch("https://api.github.com/users/Douile/events?page="+encodeURIComponent(e))).status&&(200===t.status&&(t=await t.json(),a.append.apply(a,t.map(e=>{var t=document.createElement("a");switch(t.title=new Date(e.created_at).toLocaleString(),t.href="https://github.com/"+e.repo.name,e.type){case"CreateEvent":t.innerText=`Created ${e.payload.ref_type} ${e.payload.ref||""} âž” `+e.repo.name;break;case"DeleteEvent":t.innerText=`Deleted ${e.payload.ref_type} ${e.payload.ref||""} âž” `+e.repo.name;break;case"ForkEvent":t.innerText=e.repo.name+" â‘‚ "+e.payload.forkee.full_name,t.href=e.payload.forkee.html_url;break;case"IssueCommentEvent":t.innerText=`Commented on #${e.payload.issue.number} âž” `+e.repo.name,t.href=e.payload.comment.html_url;break;case"IssuesEvent":t.innerText=""+e.payload.action.charAt(0).toUpperCase()+e.payload.action.substring(1)+` #${e.payload.issue.number} âž” `+e.repo.name,t.href=e.payload.issue.html_url;break;case"PullRequestEvent":t.innerText=""+e.payload.action.charAt(0).toUpperCase()+e.payload.action.substring(1)+` PR#${e.payload.number} âž” `+e.repo.name,t.href=e.payload.pull_request.html_url;break;case"PushEvent":t.innerText=`Pushed ${e.payload.distinct_size} commits âž” `+e.repo.name;break;case"ReleaseEvent":t.innerText=`Released ${e.payload.release.name} âž” `+e.repo.name,t.href=e.payload.release.html_url;break;case"WatchEvent":t.innerText=""+e.payload.action.charAt(0).toUpperCase()+e.payload.action.substring(1)+" ðŸ‘€ "+e.repo.name;break;default:t.innerText=e.type+" âž” "+e.repo.name}return t})),a.setAttribute("data-api-page",e+1)),a.removeAttribute("data-api-loading")))},PAGES:{"/":null,"/projects/":e=>{var t=[];void 0!==e&&1<e.hash.length&&t.push(e.hash.substring(1)),projectFilterUpdate(t)},"/activity/":async()=>{1<document.querySelector(".page-activity").childElementCount||loadActivityPage().then(null,console.error)},"/contact/":null}};for(const[o,l]of Object.entries(t))Object.defineProperty(e,o,{configurable:!1,enumerable:!1,get:()=>l});window.addEventListener("click",e=>{var t;"A"===e.target.tagName?(t=new URL(e.target.href,window.location)).host!==window.location.host||t.pathname.startsWith("/content/")||(e.preventDefault(),"#images"===t.hash?window.displayImages(JSON.parse(e.target.dataset.images)):window.displayPage(t.pathname,t)):"BUTTON"===e.target.tagName?document.querySelector(".gallery").hasAttribute("data-selected")?e.target.classList.contains("gallery-arrow-left")?window.selectImage(-1):e.target.classList.contains("gallery-arrow-right")&&window.selectImage(1):e.target.classList.contains("light-mode-button")?window.toggleLightMode():e.target.classList.contains("project-tag")&&window.projectFilterToggle(e.target.getAttribute("data-tag")):e.target.classList.contains("gallery")&&e.target.hasAttribute("data-selected")&&window.closeImages()},{capture:!0,passive:!1}),window.addEventListener("load",()=>{window.displayPage(window.location.pathname,window.location);{var e=document.querySelector("canvas#dynamic-background");if(!e||"CANVAS"!==e.tagName)throw new Error("You must provide a canvas element");e.width=window.innerWidth,e.height=window.innerHeight,e.dataColor=getComputedStyle(e).getPropertyValue("--foreground")||"#ffffff";var t={ctx:e.getContext("2d"),canvas:e};Object.defineProperties(t,{width:{get:()=>e.width},height:{get:()=>e.height}}),window._RENDERING=[];const g=(function(){requestAnimationFrame(g);var e=this.width,t=this.height,a=this.ctx,r=this.canvas,n=Date.now(),o=(a.clearRect(0,0,e,t),new Array(Math.max(Math.floor(20*Math.random())-17,0)));for(let d=0;d<o.length;d++)o[d]={x:Math.random()*e,y:Math.random()*t,created:n,length:Math.floor(4500*Math.random())+500,size:5*Math.random()+2};window._RENDERING=window._RENDERING.concat(o);var i=r.dataColor;for(let c=window._RENDERING.length-1;0<=c;c--){var l,s=window._RENDERING[c];void 0===s?window._RENDERING.splice(c,1):(l=s.size*(1-(n-s.created)/s.length))<=0?window._RENDERING.splice(c,1):(a.beginPath(),a.ellipse(s.x,s.y,l,l,0,0,2*Math.PI),a.fillStyle=i,a.fill())}}).bind(t);g()}},{once:!0}),window.addEventListener("resize",()=>{var e=document.querySelector("canvas#dynamic-background");e.width=window.innerWidth,e.height=window.innerHeight});let n;async function c(e){let t;try{t=await e.json()}catch(e){t={}}return t}window.addEventListener("touchstart",e=>{var t=Object.keys(window.PAGES),a=document.body.getAttribute("data-page"),r=t.indexOf(a);0<e.touches.length&&(n={identifier:e.touches[0].identifier,x:e.touches[0].clientX,min:.05*window.innerWidth,move:.35*window.innerWidth,page:document.querySelector(`.page[data-page="${a}"]`),pageIndex:r,pages:t,right:r<t.length-1?document.querySelector(`.page[data-page="${t[r+1]}"]`):void 0,left:0<r?document.querySelector(`.page[data-page="${t[r-1]}"]`):void 0,goingRight:!0,goingLeft:!0})}),window.addEventListener("touchmove",e=>{if(void 0!==n)for(const r of e.changedTouches){var t,a;n.identifier===r.identifier&&(t=r.clientX-n.x,Math.abs(t)>=n.min)&&(a=Math.max(Math.min(n.move/(Math.abs(t)-n.min)*100,100),0),t<0&&n.right&&n.goingRight?(n.goingLeft=!1,n.page.style.transform=`translateX(-${a}vw)`,n.right.style.transform=`translateX(${100-a}vw) `,n.right.style.opacity="1"):0<t&&n.left&&n.goingLeft&&(n.goingRight=!1,n.page.style.transform=`translateX(${a}vw)`,n.left.style.transform=`translateX(${a-100}vw)`,n.left.style.opacity="1"))}}),window.addEventListener("touchend",e=>{for(const a of e.changedTouches){var t;n.identifier===a.identifier&&(t=a.clientX-n.x,n.page.style.transform="",n.left&&(n.left.style.transform="",n.left.style.opacity=""),n.right&&(n.right.style.transform="",n.right.style.opacity=""),Math.abs(t)>=n.move&&(t<0&&n.right&&n.goingRight?window.displayPage(n.pages[n.pageIndex+1]):0<t&&n.left&&n.goingLeft&&window.displayPage(n.pages[n.pageIndex-1])),n=void 0)}}),window.addEventListener("touchcancel",e=>{for(const t of e.touches)n.identifier===t.identifier&&(n.page.style.transform="",n.left&&(n.left.style.transform="",n.left.style.opacity=""),n.right&&(n.right.style.transform="",n.right.style.opacity=""),n=void 0)}),window.addEventListener("submit",e=>{e.preventDefault(),async function(a){let r=a.getAttribute("action");if(null!==r){var n=a.getAttribute("method")||"GET",o={method:n,mode:"cors",credentials:"omit",cache:"no-cache",redirect:"manual"};if("GET"===n){r=new URL(r,window.location.href);for(let e=0;e<a.elements.length;e++){var i=a.elements[e];0<i.name.length&&r.searchParams.append(i.name,i.value)}}else{if("POST"!==n)return;var l={};for(let e=0;e<a.elements.length;e++){var s=a.elements[e];0<s.name.length&&(l[s.name]=s.value)}o.headers={"Content-Type":"application/json"},o.body=JSON.stringify(l)}n=document.querySelector(`.form-response[form=${a.id}]`);n.innerText="Sending...";let t;try{t=await fetch(r,o)}catch(e){console.error(e);const d=await c(t);return void(n.innerText=`API error ${"message"in d?`, ${d.message},`:""}please try again later...`)}if(t.ok)n.innerText="Succesfully sent message.";else{const d=await c(t);n.innerText=`API error${"message"in d?`, ${d.message},`:""} please try again later...`}}}(e.target).then(null,console.error)});let a=[];const r=[38,38,40,40,37,39,37,39,66,65];window.addEventListener("keydown",e=>{e.isTrusted&&(a.push(e.keyCode),(a=a.length>r.length?a.slice(a.length-r.length):a).length===r.length)&&a.reduce((e,t,a)=>e&&r[a]===t,!0)&&(window.location="https://cybersocuol.github.io")}),document.querySelector(".page-activity").addEventListener("scroll",e=>{e.target.scrollTop>=e.target.scrollHeight-e.target.clientHeight&&loadActivityPage().then(null,console.error)},{passive:!0})}();